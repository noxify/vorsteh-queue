---
title: Prisma Adapter
description: Prisma ORM adapter for PostgreSQL with generated types and excellent developer tooling.
---

The Prisma adapter provides PostgreSQL support using Prisma ORM, offering generated types, migrations, and excellent developer tooling.

## Installation

<PackageInstall packages={["@vorsteh-queue/core", "@vorsteh-queue/adapter-prisma"]} />

## Quick Start

```typescript
import { PrismaClient } from "@prisma/client"

import { PostgresPrismaQueueAdapter } from "@vorsteh-queue/adapter-prisma"
import { Queue } from "@vorsteh-queue/core"

const prisma = new PrismaClient()
const adapter = new PostgresPrismaQueueAdapter(prisma)
const queue = new Queue(adapter)
```

## Database Setup

### Schema

Add the queue job model to your `schema.prisma`:

```prisma
model QueueJob {
  id           String    @id @default(cuid())
  name         String
  payload      Json
  priority     Int       @default(0)
  attempts     Int       @default(0)
  maxAttempts  Int       @default(3) @map("max_attempts")
  progress     Int       @default(0)
  status       String    @default("pending")
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")
  runAt        DateTime? @map("run_at")
  completedAt  DateTime? @map("completed_at")
  failedAt     DateTime? @map("failed_at")
  error        String?
  result       Json?

  @@map("queue_jobs")
  @@index([status, priority, runAt])
  @@index([name])
}
```

### Migration

Push the schema to your database:

```bash
npx prisma db push
```

Or generate and apply the migration:

```bash
npx prisma migrate dev --name add-queue-jobs
```

### Generate Client

Generate the Prisma client:

```bash
npx prisma generate
```

## References

- Sources: https://github.com/noxify/vorsteh-queue/tree/main/packages/adapter-prisma
- NPM: https://www.npmjs.com/package/@vorsteh-queue/adapter-prisma
